!function(e,n,t){"use strict";var i,o,r,a,c={minHeight:0,elements:[],percentage:!0,userTiming:!0,pixelDepth:!0,nonInteraction:!0,gaGlobal:!1,gtmOverride:!1},l=e(n),u=[],p=!1,f=0;e.scrollDepth=function(s){function g(e,t,c,l){a?(a({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:e,eventLabel:t,eventValue:1,eventNonInteraction:s.nonInteraction}),s.pixelDepth&&arguments.length>2&&c>f&&(f=c,a({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:"Pixel Depth",eventLabel:m(c),eventValue:1,eventNonInteraction:s.nonInteraction})),s.userTiming&&arguments.length>3&&a({event:"ScrollTiming",eventCategory:"Scroll Depth",eventAction:e,eventLabel:t,eventTiming:l})):(i&&(n[r]("send","event","Scroll Depth",e,t,1,{nonInteraction:s.nonInteraction}),s.pixelDepth&&arguments.length>2&&c>f&&(f=c,n[r]("send","event","Scroll Depth","Pixel Depth",m(c),1,{nonInteraction:s.nonInteraction})),s.userTiming&&arguments.length>3&&n[r]("send","timing","Scroll Depth",e,l,t)),o&&(_gaq.push(["_trackEvent","Scroll Depth",e,t,1,s.nonInteraction]),s.pixelDepth&&arguments.length>2&&c>f&&(f=c,_gaq.push(["_trackEvent","Scroll Depth","Pixel Depth",m(c),1,s.nonInteraction])),s.userTiming&&arguments.length>3&&_gaq.push(["_trackTiming","Scroll Depth",e,l,t,100])))}function v(e){return{"25%":parseInt(.25*e,10),"50%":parseInt(.5*e,10),"75%":parseInt(.75*e,10),"100%":e-5}}function d(n,t,i){e.each(n,function(n,o){-1===e.inArray(n,u)&&t>=o&&(g("Percentage",n,t,i),u.push(n))})}function h(n,t,i){e.each(n,function(n,o){-1===e.inArray(o,u)&&e(o).length&&t>=e(o).offset().top&&(g("Elements",o,t,i),u.push(o))})}function m(e){return(250*Math.floor(e/250)).toString()}function y(){T()}function D(e,n){var t,i,o,r=null,a=0,c=function(){a=new Date,r=null,o=e.apply(t,i)};return function(){var l=new Date;a||(a=l);var u=n-(l-a);return t=this,i=arguments,0>=u?(clearTimeout(r),r=null,a=l,o=e.apply(t,i)):r||(r=setTimeout(c,u)),o}}function T(){p=!0,l.on("scroll.scrollDepth",D(function(){var i=e(t).height(),o=n.innerHeight?n.innerHeight:l.height(),r=l.scrollTop()+o,a=v(i),c=+new Date-I;return u.length>=s.elements.length+(s.percentage?4:0)?(l.off("scroll.scrollDepth"),void(p=!1)):(s.elements&&h(s.elements,r,c),void(s.percentage&&d(a,r,c)))},500))}var I=+new Date;s=e.extend({},c,s),e(t).height()<s.minHeight||(s.gaGlobal?(i=!0,r=s.gaGlobal):"function"==typeof ga?(i=!0,r="ga"):"function"==typeof __gaTracker&&(i=!0,r="__gaTracker"),"undefined"!=typeof _gaq&&"function"==typeof _gaq.push&&(o=!0),"function"==typeof s.eventHandler?a=s.eventHandler:"undefined"==typeof dataLayer||"function"!=typeof dataLayer.push||s.gtmOverride||(a=function(e){dataLayer.push(e)}),e.scrollDepth.reset=function(){u=[],f=0,l.off("scroll.scrollDepth"),T()},e.scrollDepth.addElements=function(n){"undefined"!=typeof n&&e.isArray(n)&&(e.merge(s.elements,n),p||T())},e.scrollDepth.removeElements=function(n){"undefined"!=typeof n&&e.isArray(n)&&e.each(n,function(n,t){var i=e.inArray(t,s.elements),o=e.inArray(t,u);-1!=i&&s.elements.splice(i,1),-1!=o&&u.splice(o,1)})},y())}}(jQuery,window,document);var riveted=function(){function e(e){e=e||{},d=parseInt(e.reportInterval,10)||5,h=parseInt(e.idleTimeout,10)||30,w=e.gaGlobal||"ga","function"==typeof window[w]&&(y=!0),"undefined"!=typeof _gaq&&"function"==typeof _gaq.push&&(D=!0),"undefined"!=typeof dataLayer&&"function"==typeof dataLayer.push&&(I=!0),T="gaTracker"in e&&"string"==typeof e.gaTracker?e.gaTracker+".send":"send","function"==typeof e.eventHandler&&(g=e.eventHandler),"function"==typeof e.userTimingHandler&&(v=e.userTimingHandler),m=!("nonInteraction"in e)||e.nonInteraction!==!1&&"false"!==e.nonInteraction,t(document,"keydown",s),t(document,"click",s),t(window,"mousemove",n(s,500)),t(window,"scroll",n(s,500)),t(document,"visibilitychange",o),t(document,"webkitvisibilitychange",o)}function n(e,n){var t,i,o,r=null,a=0,c=function(){a=new Date,r=null,o=e.apply(t,i)};return function(){var l=new Date;a||(a=l);var u=n-(l-a);return t=this,i=arguments,0>=u?(clearTimeout(r),r=null,a=l,o=e.apply(t,i)):r||(r=setTimeout(c,u)),o}}function t(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent?e.attachEvent("on"+n,t):e["on"+n]=t}function i(){clearTimeout(A),a()}function o(){(document.hidden||document.webkitHidden)&&i()}function r(){L+=1,L>0&&L%d===0&&g(L)}function a(){_=!0,clearTimeout(H)}function c(){i(),k=!0}function l(){k=!1}function u(){_=!1,clearTimeout(H),H=setInterval(r,1e3)}function p(){var e=new Date,n=e-b;S=!0,v(n),H=setInterval(r,1e3)}function f(){b=new Date,L=0,S=!1,_=!1,clearTimeout(H),clearTimeout(A)}function s(){k||(S||p(),_&&u(),clearTimeout(A),A=setTimeout(i,1e3*h+100))}var g,v,d,h,m,y,D,T,I,w,S=!1,_=!1,k=!1,L=0,b=new Date,H=null,A=null;return v=function(e){I?dataLayer.push({event:"RivetedTiming",eventCategory:"Riveted",timingVar:"First Interaction",timingValue:e}):(y&&window[w](T,"timing","Riveted","First Interaction",e),D&&_gaq.push(["_trackTiming","Riveted","First Interaction",e,null,100]))},g=function(e){I?dataLayer.push({event:"Riveted",eventCategory:"Riveted",eventAction:"Time Spent",eventLabel:e,eventValue:d,eventNonInteraction:m}):(y&&window[w](T,"event","Riveted","Time Spent",e.toString(),d,{nonInteraction:m}),D&&_gaq.push(["_trackEvent","Riveted","Time Spent",e.toString(),d,m]))},{init:e,trigger:s,setIdle:i,on:l,off:c,reset:f}}();
//# sourceMappingURL=jquery.scrolldepth.js.map
